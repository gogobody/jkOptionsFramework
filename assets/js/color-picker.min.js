(function(c,f){c.widget("wp.wpColorPicker",{options:{defaultColor:!1,change:!1,clear:!1,hide:!0,palettes:!0,width:255,mode:"hsv",type:"full",slider:"horizontal"},_createHueOnly:function(){var a=this,b=a.element;b.hide();var d="hsl("+b.val()+", 100, 50)";b.iris({mode:"hsl",type:"hue",hide:!1,color:d,change:function(e,g){"function"===typeof a.options.change&&a.options.change.call(this,e,g)},width:a.options.width,slider:a.options.slider})},_create:function(){if(c.support.iris){var a=this,b=a.element;
c.extend(a.options,b.data());if("hue"===a.options.type)return a._createHueOnly();a.close=a.close.bind(a);a.initialValue=b.val();b.addClass("wp-color-picker");b.parent("label").length||(b.wrap("<label></label>"),a.wrappingLabelText=c('<span class="screen-reader-text"></span>').insertBefore(b).text("\u989c\u8272\u503c"));a.wrappingLabel=b.parent();a.wrappingLabel.wrap('<div class="wp-picker-container" />');a.wrap=a.wrappingLabel.parent();a.toggler=c('<button type="button" class="button wp-color-result" aria-expanded="false"><span class="wp-color-result-text"></span></button>').insertBefore(a.wrappingLabel).css({backgroundColor:a.initialValue});
a.toggler.find(".wp-color-result-text").text("\u9009\u62e9\u989c\u8272");a.pickerContainer=c('<div class="wp-picker-holder" />').insertAfter(a.wrappingLabel);a.button=c('<input type="button" class="button button-small" />');a.options.defaultColor?a.button.addClass("wp-picker-default").val("\u9ed8\u8ba4").attr("aria-label","Select default color"):a.button.addClass("wp-picker-clear").val("\u6e05\u9664").attr("aria-label","\u6e05\u9664\u989c\u8272");a.wrappingLabel.wrap('<span class="wp-picker-input-wrap hidden" />').after(a.button);
a.inputWrapper=b.closest(".wp-picker-input-wrap");b.iris({target:a.pickerContainer,hide:a.options.hide,width:a.options.width,mode:a.options.mode,palettes:a.options.palettes,change:function(d,e){a.toggler.css({backgroundColor:e.color.toString()});"function"===typeof a.options.change&&a.options.change.call(this,d,e)}});b.val(a.initialValue);a._addListeners();a.options.hide||a.toggler.click()}},_addListeners:function(){var a=this;a.wrap.on("click.wpcolorpicker",function(b){b.stopPropagation()});a.toggler.on("click",
function(){a.toggler.hasClass("wp-picker-open")?a.close():a.open()});a.element.on("change",function(b){var d=c(this).val();if(""===d||"#"===d)a.toggler.css("backgroundColor",""),"function"===typeof a.options.clear&&a.options.clear.call(this,b)});a.button.on("click",function(b){var d=c(this);d.hasClass("wp-picker-clear")?(a.element.val(""),a.toggler.css("backgroundColor",""),"function"===typeof a.options.clear&&a.options.clear.call(this,b)):d.hasClass("wp-picker-default")&&a.element.val(a.options.defaultColor).change()})},
open:function(){this.element.iris("toggle");this.inputWrapper.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open").attr("aria-expanded","true");c("body").trigger("click.wpcolorpicker").on("click.wpcolorpicker",this.close)},close:function(){this.element.iris("toggle");this.inputWrapper.addClass("hidden");this.wrap.removeClass("wp-picker-active");this.toggler.removeClass("wp-picker-open").attr("aria-expanded","false");c("body").off("click.wpcolorpicker",
this.close)},color:function(a){if(a===f)return this.element.iris("option","color");this.element.iris("option","color",a)},defaultColor:function(a){if(a===f)return this.options.defaultColor;this.options.defaultColor=a}})})(jQuery);
